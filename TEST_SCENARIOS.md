# 테스트 시나리오

## 1. 설치 및 초기화 테스트

### TC-001: 원라인 설치
- **Given**: Node.js/npm이 설치되어 있음
- **When**: `npx llm-jira init` 실행
- **Then**: 
  - 프로젝트 디렉토리가 생성됨
  - 의존성이 설치됨
  - 데이터베이스가 초기화됨
  - 서버가 시작됨
  - 브라우저가 자동으로 열림 (선택적)

### TC-002: 기존 프로젝트에서 초기화
- **Given**: Git 저장소가 있는 디렉토리
- **When**: `npx llm-jira init` 실행
- **Then**: 
  - 기존 Git 저장소를 유지
  - `.llm-jira` 디렉토리가 생성됨
  - 설정 파일이 생성됨

## 2. 작업 관리 테스트

### TC-003: 작업 생성
- **Given**: 웹 UI에 접속
- **When**: "새 작업" 버튼 클릭 후 제목과 설명 입력
- **Then**: 
  - TODO 상태로 작업이 생성됨
  - 목록에 표시됨

### TC-004: 파일 첨부
- **Given**: 작업 생성 중
- **When**: 이미지/파일을 드래그 앤 드롭
- **Then**: 
  - 파일이 업로드됨
  - 작업 상세에서 파일 확인 가능

### TC-005: 상태 변경 (수동)
- **Given**: TODO 상태의 작업 존재
- **When**: 드롭다운에서 상태를 DONE으로 변경
- **Then**: 작업 상태가 DONE으로 업데이트됨

## 3. LLM 자동 실행 테스트

### TC-006: TODO → ING 자동 변경
- **Given**: TODO 상태의 작업 존재, LLM 설정 완료
- **When**: "진행" 버튼 클릭
- **Then**: 
  - 상태가 즉시 ING로 변경됨
  - 실행 로그가 표시됨

### TC-007: LLM 실행 성공 → DONE
- **Given**: ING 상태의 작업, LLM이 성공적으로 코드 실행 및 테스트 통과
- **When**: LLM 실행 완료
- **Then**: 
  - 상태가 자동으로 DONE으로 변경됨
  - 실행 결과가 기록됨

### TC-008: LLM 실행 실패 → PENDING
- **Given**: ING 상태의 작업, LLM 실행 실패
- **When**: 에러 발생
- **Then**: 
  - 상태가 PENDING으로 변경되거나 사용자 선택 가능
  - 에러 로그가 기록됨
  - 재시도 가능

### TC-009: Claude API 연동
- **Given**: Claude API 키가 설정됨
- **When**: 작업 실행
- **Then**: 
  - Claude API가 호출됨
  - 응답이 처리됨

### TC-010: 로컬 LLM 연동 (ollama)
- **Given**: ollama가 설치되어 있고 모델이 다운로드됨
- **When**: 로컬 LLM으로 작업 실행
- **Then**: 
  - ollama API가 호출됨
  - 응답이 처리됨

## 4. 병렬 실행 테스트

### TC-011: 다중 작업 동시 실행
- **Given**: 여러 개의 TODO 작업 존재
- **When**: 여러 작업의 "진행" 버튼을 연속으로 클릭
- **Then**: 
  - 모든 작업이 동시에 ING 상태로 변경됨
  - 각 작업이 독립적으로 실행됨
  - 각각의 실행 로그가 표시됨

### TC-012: 병렬 실행 중 상태 업데이트
- **Given**: 3개 작업이 동시에 실행 중
- **When**: 작업 A가 완료됨
- **Then**: 
  - 작업 A만 DONE으로 변경됨
  - 다른 작업들은 계속 ING 상태 유지

## 5. 릴리즈 관리 테스트

### TC-013: 릴리즈 생성
- **Given**: 여러 작업이 다양한 상태 (TODO, ING, DONE)
- **When**: "릴리즈 생성" 클릭, 버전 "v1.0.0" 입력
- **Then**: 
  - 현재 작업 상태 스냅샷이 저장됨
  - Git 커밋이 생성됨
  - Git 태그 "v1.0.0"이 생성됨
  - 릴리즈 목록에 표시됨

### TC-014: 특정 버전 체크아웃
- **Given**: 여러 릴리즈 버전 존재
- **When**: 릴리즈 목록에서 "v1.0.0" 선택
- **Then**: 
  - Git이 해당 태그로 체크아웃됨
  - 웹 UI가 v1.0.0의 작업 상태로 표시됨

### TC-015: 릴리즈 히스토리 조회
- **Given**: 여러 릴리즈가 생성됨
- **When**: 릴리즈 목록 페이지 접속
- **Then**: 
  - 모든 릴리즈가 날짜순으로 표시됨
  - 각 릴리즈의 작업 상태 요약이 표시됨

## 6. 통합 테스트

### TC-016: 전체 플로우
1. 프로젝트 초기화
2. 작업 3개 생성
3. 작업 1, 2 실행 (병렬)
4. 작업 1 완료 확인
5. 릴리즈 v1.0.0 생성
6. 작업 3 추가 실행
7. 릴리즈 v1.1.0 생성
8. v1.0.0으로 체크아웃
9. v1.1.0으로 다시 체크아웃

## 7. 에러 핸들링 테스트

### TC-017: LLM API 실패
- **Given**: 잘못된 API 키
- **When**: 작업 실행
- **Then**: 
  - 에러 메시지 표시
  - 상태가 적절히 업데이트됨

### TC-018: Git 실패
- **Given**: Git 저장소가 없거나 권한 없음
- **When**: 릴리즈 생성 시도
- **Then**: 
  - 명확한 에러 메시지
  - 스냅샷은 저장되지만 Git 작업은 건너뜀

### TC-019: 데이터베이스 손상
- **Given**: 데이터베이스 파일 손상
- **When**: 애플리케이션 시작
- **Then**: 
  - 자동 복구 시도
  - 또는 초기화 옵션 제공
